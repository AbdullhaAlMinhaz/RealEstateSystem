@model RealEstateSystem.Models.CommissionInvoice

@{
    Layout = "~/Views/Shared/_SellerLayout.cshtml";
}

<style>
    .receipt-box {
        max-width: 750px;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        background: #fff;
    }

    .receipt-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .receipt-row {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
    }

    .muted {
        color: #6b7280;
    }

    .btn-print {
        margin-top: 16px;
    }

    @@media print {
    /* hide everything */
    body * {
        visibility: hidden !important;
    }

    /* show only receipt box */
    .receipt-box, .receipt-box * {
        visibility: visible !important;
    }

    /* place receipt at top left for clean PDF */
    .receipt-box {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        max-width: 750px;
        margin: 0;
        border: none;
        box-shadow: none;
    }

    /* hide print button */
    .btn-print {
        display: none !important;
    }

    /* A4 printing */
    @@page {
        size: A4;
        margin: 12mm;
    }
}

</style>

<div class="receipt-box">
    <div class="receipt-title">Commission Receipt</div>
    <div class="muted">Receipt generated after admin approval.</div>

    <hr />

    <div class="receipt-row">
        <div><b>Invoice ID</b></div>
        <div>@Model.CommissionInvoiceId</div>
    </div>

    <div class="receipt-row">
        <div><b>Property</b></div>
        <div>@Model.Property?.Title</div>
    </div>

    <div class="receipt-row">
        <div><b>Seller</b></div>
        <div>@Model.Seller?.User?.FirstName @Model.Seller?.User?.LastName</div>
    </div>

    <div class="receipt-row">
        <div><b>Listing Price</b></div>
        <div>BDT @Model.ListingPrice.ToString("N2")</div>
    </div>

    <div class="receipt-row">
        <div><b>Commission Rate</b></div>
        <div>@Model.CommissionRatePercent%</div>
    </div>

    <div class="receipt-row">
        <div><b>Commission Paid</b></div>
        <div><b>BDT @Model.CommissionAmount.ToString("N2")</b></div>
    </div>

    <div class="receipt-row">
        <div><b>Payment Method</b></div>
        <div>
            @{
                string paymentText =
                (Model.PaymentMethod == null && !string.IsNullOrWhiteSpace(Model.GatewayTranId))
                ? "SSLCommerz"
                : (Model.PaymentMethod == RealEstateSystem.Models.CommissionPaymentMethod.Other && !string.IsNullOrWhiteSpace(Model.GatewayTranId))
                ? "SSLCommerz"
                : Model.PaymentMethod?.ToString() ?? "N/A";
            }
            @paymentText
        </div>
    </div>

    <div class="receipt-row">
        <div><b>Transaction ID</b></div>
        <div>
            @(string.IsNullOrWhiteSpace(Model.TransactionId)
                        ? Model.GatewayTranId
                        : Model.TransactionId)
        </div>
    </div>

    <div class="receipt-row">
        <div><b>Approved Date</b></div>
        <div>@Model.VerifiedDate?.ToString("dd MMM yyyy, hh:mm tt")</div>
    </div>

    @if (!string.IsNullOrWhiteSpace(Model.AdminNote))
    {
        <div class="receipt-row">
            <div><b>Admin Note</b></div>
            <div>@Model.AdminNote</div>
        </div>
    }

    <button class="btn btn-primary btn-print" onclick="window.print()">Print / Save as PDF</button>
</div>
