@model RealEstateSystem.ViewModels.SellerPropertyCreateViewModel

@{
    Layout = "~/Views/Shared/_SellerLayout.cshtml";
}

<style>
   

    .card-form {
        padding: 24px 28px 28px;
    }

    .card-header-between {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        gap: 16px;
    }

    .card-form .card-header h2 {
        font-size: 1.3rem;
        margin-bottom: 4px;
    }

    .card-form .card-subtitle {
        font-size: 0.9rem;
        color: #7b8497;
    }

    /* server error box */
    .form-alert {
        margin: 16px 0 8px;
        padding: 10px 12px;
        border-radius: 10px;
        background: #ffe5e5;
        color: #b32626;
        font-size: 0.88rem;
    }

    /* main layout */
    .property-form {
        margin-top: 12px;
        display: flex;
        flex-direction: column;
        gap: 18px;
    }

    .property-form-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 18px 22px;
    }

    .property-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .property-field-full {
        grid-column: 1 / -1;
    }

    .property-field label {
        font-size: 0.9rem;
        font-weight: 500;
        color: #2d3150;
    }

    .property-field input,
    .property-field select,
    .property-field textarea {
        width: 100%;
        padding: 8px 10px;
        border-radius: 10px;
        border: 1px solid #dde1f0;
        font-size: 0.9rem;
        outline: none;
        background: #f9fbff;
        transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .property-field textarea {
        resize: vertical;
        min-height: 96px;
    }

        .property-field input:focus,
        .property-field select:focus,
        .property-field textarea:focus {
            border-color: #4f46e5;
            background: #ffffff;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.18);
        }

    /* price / area with prefix/suffix */
    .input-with-prefix,
    .input-with-suffix {
        display: flex;
        align-items: center;
        border-radius: 10px;
        border: 1px solid #dde1f0;
        overflow: hidden;
        background: #f9fbff;
    }

        .input-with-prefix input,
        .input-with-suffix input {
            border: none;
            background: transparent;
            padding: 8px 10px;
            flex: 1;
            outline: none;
        }

    .input-prefix,
    .input-suffix {
        padding: 8px 10px;
        font-size: 0.82rem;
        color: #6b7280;
        white-space: nowrap;
    }

    /* validation error text */
    .field-error {
        font-size: 0.78rem;
        color: #d12b3f;
    }

    /* footer buttons */
    .property-form-footer {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 8px;
    }

    .btn-primary,
    .btn-secondary {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 9px 18px;
        border-radius: 999px;
        font-size: 0.9rem;
        font-weight: 500;
        border: none;
        cursor: pointer;
        text-decoration: none;
    }

    .btn-primary {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #ffffff;
        box-shadow: 0 10px 18px rgba(22, 163, 74, 0.25);
    }

        .btn-primary:hover {
            filter: brightness(1.05);
        }

    .btn-secondary {
        background: #f1f5f9;
        color: #111827;
        border: 1px solid #e2e8f0;
    }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

    /* responsive: stack columns on small screens */
    @@media (max-width: 900px) {
        .property-form-grid {
            grid-template-columns: 1fr;
        }

        .property-field-full {
            grid-column: auto;
        }

        .property-form-footer {
            justify-content: stretch;
        }

            .property-form-footer .btn-primary,
            .property-form-footer .btn-secondary {
                flex: 1;
            }
    }
</style>

<main class="content">
    <section class="card card-form">
        <div class="card-header card-header-between">
            <div>
                <h2>Add New Property</h2>
                <p class="card-subtitle">
                    Fill in the details below to create a new listing.
                </p>
            </div>
        </div>

        <!-- model-level error (DB / server) -->
        @if (!ViewData.ModelState.IsValid &&
                ViewData.ModelState[string.Empty]?.Errors.Count > 0)
        {
            <div class="form-alert">
                @foreach (var err in ViewData.ModelState[string.Empty].Errors)
                {
                    <div>@err.ErrorMessage</div>
                }
            </div>
        }

                <form asp-action="Create" asp-controller="SellerProperties" method="post" enctype="multipart/form-data" class="property-form">
                    @Html.AntiForgeryToken()

            <div class="property-form-grid">
                <!-- Column 1 -->
                <div class="property-field">
                    <label asp-for="Title"></label>
                    <input asp-for="Title" />
                    <span asp-validation-for="Title" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="PropertyType"></label>
                    <select asp-for="PropertyType"
                            asp-items="Html.GetEnumSelectList<RealEstateSystem.Models.PropertyType>()">
                    </select>
                    <span asp-validation-for="PropertyType" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="Price"></label>
                    <div class="input-with-prefix">
                        <span class="input-prefix">BDT</span>
                        <input asp-for="Price" />
                    </div>
                    <span asp-validation-for="Price" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="AreaSqft"></label>
                    <div class="input-with-suffix">
                        <input asp-for="AreaSqft" />
                        <span class="input-suffix">sq ft</span>
                    </div>
                    <span asp-validation-for="AreaSqft" class="field-error"></span>
                </div>

                <!-- Column 2 -->
                <div class="property-field">
                    <label asp-for="AreaOrLocation"></label>
                    <input asp-for="AreaOrLocation" />
                    <span asp-validation-for="AreaOrLocation" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="State"></label>
                    <input asp-for="State" />
                    <span asp-validation-for="State" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="Bedrooms"></label>
                    <input asp-for="Bedrooms" />
                    <span asp-validation-for="Bedrooms" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="Bathrooms"></label>
                    <input asp-for="Bathrooms" />
                    <span asp-validation-for="Bathrooms" class="field-error"></span>
                </div>

                <!-- Full width rows -->
                <div class="property-field property-field-full">
                    <label asp-for="Description"></label>
                    <textarea asp-for="Description" rows="4"></textarea>
                    <span asp-validation-for="Description" class="field-error"></span>
                </div>

                <div class="property-field property-field-full">
                    <label asp-for="Address"></label>
                    <input asp-for="Address" />
                    <span asp-validation-for="Address" class="field-error"></span>
                </div>
                <div class="property-field property-field-full">
                    <label asp-for="Photos">Property photos</label>
                    <input asp-for="Photos" type="file" multiple />
                    @* <small class="field-hint">Select multiple images from Local device.</small> *@
                    <span asp-validation-for="Photos" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="City"></label>
                    <input asp-for="City" />
                    <span asp-validation-for="City" class="field-error"></span>
                </div>

                <div class="property-field">
                    <label asp-for="ZipCode"></label>
                    <input asp-for="ZipCode" />
                    <span asp-validation-for="ZipCode" class="field-error"></span>
                </div>
                
            </div>

            <div class="property-form-footer">
                <button type="submit" class="btn-primary">Save Property</button>
                <a asp-action="Index" asp-controller="SellerProperties" class="btn-secondary">Cancel</a>
            </div>
        </form>
    </section>
</main>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
